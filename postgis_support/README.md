A series of SQL statements used to add spatial support to the Census data. It is assumed that the spatial data used will be the Census TIGER/Line files. These scripts are very rough, and require some knowledge to use them successfully.

The `geoheader` table is altered with the addition of a geometry column `geom` and a unique integer column `gid`, the latter because many GISes require such a field (`geoid` will not suffice because it is varchar). The geometry column is declared as type `geometry(MultiPolygon, 4269)`, where 4269 is the SRID (lat-long, North American Datum 1983) used by Census. Because it is a typmodded column and not plain geometry, *it requires PostGIS 2.0+*.

It is assumed that the data manager is familiar with loading spatial data. Mapping demographic data the way the data has been released requires joining the spatial layer to `geoheader` and then joining to the sequences. Because the spatial data are of little interest without the associated demographic data, I feel that it is better to put the spatial data directly into `geoheader`. Then mapping the data can be accomplished with only one join.

Census geographies include water, and may extend several miles offshore in some areas of the country. A bash script, `tiger2010_areawater.sh`, *tested only on Linux* can be used to download all water features from the Census ftp site and import them into a PostGIS spatial table. A SQL script, `tiger clip tracts to shoreline 2010.sql`, uses the water features to clip tracts to shoreline.

The way PostGIS support is implemented for census-postgres differs from the traditional GIS approach in that all geometries for all scales are inserted into one table. Normally, a GIS user will want to have states, counties, tracts, and other geographies in separate layers (tables). But Census releases these data mashed together into one or two files per sequence (only tracts and block groups are broken out into separate files for the 5-year estimates). In the future, I intend to test using partitioning to separate scales while maintaining consistent table structure. In the meantime, GIS users will have to filter manually, or the data manager will have to add spatial views restricting the data by geographic scale.
